<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>XBee Firmware Library: Time Cluster</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XBee Firmware Library
   &#160;<span id="projectnumber">1.6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Time Cluster<div class="ingroups"><a class="el" href="group__zigbee.html">ZigBee Networking</a> &raquo; <a class="el" href="group__zcl.html">ZigBee Cluster Library</a> &raquo; <a class="el" href="group__zcl__clusters.html">Clusters</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:zcl__time_8c"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zcl__time_8c.html">zcl_time.c</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:zcl__time_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="zcl__time_8h.html">zcl_time.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2e2d2dbec01a8a45f90a5d01ab3fbd08"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__hal__hcs08.html#ga2d31063fef649c85396fb28130ef9795">uint_fast8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga2e2d2dbec01a8a45f90a5d01ab3fbd08">_zcl_time_time_get</a> (const <a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> FAR *attribute)</td></tr>
<tr class="separator:ga2e2d2dbec01a8a45f90a5d01ab3fbd08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72946a4ed2ad41dbd35ebb51795b5bb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga72946a4ed2ad41dbd35ebb51795b5bb5">_zcl_time_time_set</a> (const <a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> FAR *attribute, <a class="el" href="structzcl__attribute__write__rec__t.html">zcl_attribute_write_rec_t</a> *rec)</td></tr>
<tr class="separator:ga72946a4ed2ad41dbd35ebb51795b5bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1df1514e9a0a17b3e16039ec2026bed1"><td class="memItemLeft" align="right" valign="top">_zcl_time_debug int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga1df1514e9a0a17b3e16039ec2026bed1">_zcl_time_timestatus_set</a> (const <a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> FAR *attribute, <a class="el" href="structzcl__attribute__write__rec__t.html">zcl_attribute_write_rec_t</a> *rec)</td></tr>
<tr class="separator:ga1df1514e9a0a17b3e16039ec2026bed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1aeb04b41733758321b70b93b51da33"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#gae1aeb04b41733758321b70b93b51da33">zcl_time_client</a> (const <a class="el" href="structwpan__envelope__t.html">wpan_envelope_t</a> FAR *envelope, void FAR *context)</td></tr>
<tr class="memdesc:gae1aeb04b41733758321b70b93b51da33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle Read Attribute Responses to requests sent as part of the <a class="el" href="group__zcl__time.html#ga32a901048d0bf5b6c6cf9a1cf7fb1e28" title="Find Time Servers on the network, query them for the current time and then synchronize this device&#39;s ...">zcl_time_find_servers()</a> process.  <a href="#gae1aeb04b41733758321b70b93b51da33">More...</a><br /></td></tr>
<tr class="separator:gae1aeb04b41733758321b70b93b51da33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32a901048d0bf5b6c6cf9a1cf7fb1e28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga32a901048d0bf5b6c6cf9a1cf7fb1e28">zcl_time_find_servers</a> (<a class="el" href="structwpan__dev__t.html">wpan_dev_t</a> *dev, <a class="el" href="group__types.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> profile_id)</td></tr>
<tr class="memdesc:ga32a901048d0bf5b6c6cf9a1cf7fb1e28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find Time Servers on the network, query them for the current time and then synchronize this device's clock to that time.  <a href="#ga32a901048d0bf5b6c6cf9a1cf7fb1e28">More...</a><br /></td></tr>
<tr class="separator:ga32a901048d0bf5b6c6cf9a1cf7fb1e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad56f618c84b428540c5ffcb60095462c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__zcl__types.html#gadd8ad64f3ae1ee581114f9ca39f3621f">zcl_utctime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#gad56f618c84b428540c5ffcb60095462c">zcl_time_now</a> (void)</td></tr>
<tr class="memdesc:gad56f618c84b428540c5ffcb60095462c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current date/time, using the ZCL epoch of January 1, 2000.  <a href="#gad56f618c84b428540c5ffcb60095462c">More...</a><br /></td></tr>
<tr class="separator:gad56f618c84b428540c5ffcb60095462c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga2066d4a3853d4b0d8de8b162f829e10f"><td class="memItemLeft" ><a class="el" href="group__types.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;&#160;&#160;<a class="el" href="group__zcl__time.html#ga2066d4a3853d4b0d8de8b162f829e10f">end_of_list</a></td></tr>
<tr class="separator:ga2066d4a3853d4b0d8de8b162f829e10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ebc2ff4a76b13297f08e147d092cf48"><td class="memItemLeft" ><a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a>&#160;&#160;&#160;<a class="el" href="group__zcl__time.html#ga9ebc2ff4a76b13297f08e147d092cf48">time</a></td></tr>
<tr class="separator:ga9ebc2ff4a76b13297f08e147d092cf48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d1b0a116c32c46e7ab4c94e5f789cfa"><td class="memItemLeft" ><a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a>&#160;&#160;&#160;<a class="el" href="group__zcl__time.html#ga1d1b0a116c32c46e7ab4c94e5f789cfa">time_status</a></td></tr>
<tr class="separator:ga1d1b0a116c32c46e7ab4c94e5f789cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e971939123710b2c6e2568a28a7f86c"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:ga2066d4a3853d4b0d8de8b162f829e10f"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="group__types.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;&#160;&#160;<a class="el" href="group__zcl__time.html#ga2066d4a3853d4b0d8de8b162f829e10f">end_of_list</a></td></tr>
<tr class="separator:ga2066d4a3853d4b0d8de8b162f829e10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ebc2ff4a76b13297f08e147d092cf48"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a>&#160;&#160;&#160;<a class="el" href="group__zcl__time.html#ga9ebc2ff4a76b13297f08e147d092cf48">time</a></td></tr>
<tr class="separator:ga9ebc2ff4a76b13297f08e147d092cf48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d1b0a116c32c46e7ab4c94e5f789cfa"><td class="memItemLeft" >&#160;&#160;&#160;<a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a>&#160;&#160;&#160;<a class="el" href="group__zcl__time.html#ga1d1b0a116c32c46e7ab4c94e5f789cfa">time_status</a></td></tr>
<tr class="separator:ga1d1b0a116c32c46e7ab4c94e5f789cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e971939123710b2c6e2568a28a7f86c"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga5e971939123710b2c6e2568a28a7f86c">zcl_time_attr</a></td></tr>
<tr class="separator:ga5e971939123710b2c6e2568a28a7f86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga926f1bfd80ed5a894abfc872a292c556"><td class="memItemLeft" align="right" valign="top">XBEE_BEGIN_DECLS const <a class="el" href="structzcl__attribute__tree__t.html">zcl_attribute_tree_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga926f1bfd80ed5a894abfc872a292c556">zcl_time_attribute_tree</a> []</td></tr>
<tr class="separator:ga926f1bfd80ed5a894abfc872a292c556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd8e3bd6481f3841825a7596bc131b2f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structzcl__attribute__tree__t.html">zcl_attribute_tree_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#gabd8e3bd6481f3841825a7596bc131b2f">zcl_time_attribute_tree</a> []</td></tr>
<tr class="separator:gabd8e3bd6481f3841825a7596bc131b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga999cc34fc0c4c1eb840543f1e8237d29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#gafd12020da5a235dfcf0c3c748fb5baed">int32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga999cc34fc0c4c1eb840543f1e8237d29">zcl_time_skew</a> = 0</td></tr>
<tr class="memdesc:ga999cc34fc0c4c1eb840543f1e8237d29"><td class="mdescLeft">&#160;</td><td class="mdescRight">difference between <a class="el" href="group__hal.html#ga5c1a8bccd41acf1d7264a75698077749" title="Platform-specific function to return the number of elapsed seconds. ">xbee_seconds_timer()</a> and actual calendar time  <a href="#ga999cc34fc0c4c1eb840543f1e8237d29">More...</a><br /></td></tr>
<tr class="separator:ga999cc34fc0c4c1eb840543f1e8237d29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e1da84a7e72ee1626d6328252fd621a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__zcl__types.html#gadd8ad64f3ae1ee581114f9ca39f3621f">zcl_utctime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga4e1da84a7e72ee1626d6328252fd621a">zcl_time_time</a></td></tr>
<tr class="separator:ga4e1da84a7e72ee1626d6328252fd621a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76f465fead960f138224d8e2a9a59469"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#gaeabfa2ca48c14f613f88a63b8b0c92e3">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__time.html#ga76f465fead960f138224d8e2a9a59469">zcl_time_timestatus</a> = ZCL_TIME_STATUS_MASTER</td></tr>
<tr class="memdesc:ga76f465fead960f138224d8e2a9a59469"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current value of TimeStatus Attribute (#ZCL_TIME_ATTR_TIME_STATUS)  <a href="#ga76f465fead960f138224d8e2a9a59469">More...</a><br /></td></tr>
<tr class="separator:ga76f465fead960f138224d8e2a9a59469"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga2e2d2dbec01a8a45f90a5d01ab3fbd08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_zcl_time_debug <a class="el" href="group__hal__hcs08.html#ga2d31063fef649c85396fb28130ef9795">uint_fast8_t</a> _zcl_time_time_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> FAR *&#160;</td>
          <td class="paramname"><em>attribute</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga72946a4ed2ad41dbd35ebb51795b5bb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_zcl_time_debug int _zcl_time_time_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> FAR *&#160;</td>
          <td class="paramname"><em>attribute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzcl__attribute__write__rec__t.html">zcl_attribute_write_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga1df1514e9a0a17b3e16039ec2026bed1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_zcl_time_debug int _zcl_time_timestatus_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> FAR *&#160;</td>
          <td class="paramname"><em>attribute</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structzcl__attribute__write__rec__t.html">zcl_attribute_write_rec_t</a> *&#160;</td>
          <td class="paramname"><em>rec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gae1aeb04b41733758321b70b93b51da33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_zcl_time_debug int zcl_time_client </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structwpan__envelope__t.html">wpan_envelope_t</a> FAR *&#160;</td>
          <td class="paramname"><em>envelope</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void FAR *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle Read Attribute Responses to requests sent as part of the <a class="el" href="group__zcl__time.html#ga32a901048d0bf5b6c6cf9a1cf7fb1e28" title="Find Time Servers on the network, query them for the current time and then synchronize this device&#39;s ...">zcl_time_find_servers()</a> process. </p>
<p>This function expects to receive "read attribute response" packets ONLY for reads of Time and TimeStatus.</p>
<p>If responding device is a master or is synchronized with one, use it's Time value to update a "skew" global used to track the offset between system time (which may just be "seconds of uptime") and calendar time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">envelope</td><td>envelope from received message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>pointer to attribute list for cluster (typically passed in via endpoint dispatcher)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Command was processed and default response (with either success or error status) was sent.</td></tr>
    <tr><td class="paramname">!0</td><td>Error sending default response; time may or may not have been set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga32a901048d0bf5b6c6cf9a1cf7fb1e28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int zcl_time_find_servers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structwpan__dev__t.html">wpan_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__types.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a>&#160;</td>
          <td class="paramname"><em>profile_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find Time Servers on the network, query them for the current time and then synchronize this device's clock to that time. </p>
<dl class="section note"><dt>Note</dt><dd>This function uses a static buffer to hold context information for the ZDO responder that generates the ZCL Read Attributes request. Wait at least 60 seconds between calls to allow for earlier requests to time out.</dd>
<dd>
This function will only work correctly if the Time Cluster Client in your endpoint table is using the <a class="el" href="group__zcl__time.html#gae1aeb04b41733758321b70b93b51da33" title="Handle Read Attribute Responses to requests sent as part of the zcl_time_find_servers() process...">zcl_time_client()</a> function as its callback handler. If you use the ZCL_CLUST_ENTRY_TIME_CLIENT or ZCL_CLUST_ENTRY_TIME_BOTH macro, the client cluster is set up correctly.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dev</td><td>device to send query on </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">profile_id</td><td>profile ID to match in endpoint table or #WPAN_APS_PROFILE_ANY to use the first endpoint with a Time Cluster Client</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successfully issued ZDO Match Descriptor Request to find Time Cluster Servers on the network. No guarantee that we'll get a response. </td></tr>
    <tr><td class="paramname">!0</td><td>Some sort of error occurred in generating or sending the ZDO Match Descriptor Request. </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>Couldn't find a Time Cluster Client with <code>profile_id</code> in the endpoint table of <code>dev</code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad56f618c84b428540c5ffcb60095462c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__zcl__types.html#gadd8ad64f3ae1ee581114f9ca39f3621f">zcl_utctime_t</a> zcl_time_now </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current date/time, using the ZCL epoch of January 1, 2000. </p>
<p>Assumes that device has connected to a time server and updated its clock accordingly. Returns ZCL_UTCTIME_INVALID if the device has not synchronized its clock.</p>
<p>Do not use this value for tracking elapsed time &ndash; use <a class="el" href="group__hal.html#ga5c1a8bccd41acf1d7264a75698077749" title="Platform-specific function to return the number of elapsed seconds. ">xbee_seconds_timer()</a> or <a class="el" href="group__hal.html#ga22b4e3df788254ca5f8530e9aee58515" title="Platform-specific function to return the number of elapsed milliseconds. ">xbee_millisecond_timer()</a> instead. The value may jump forward (or even backward) when the device decides to synchronize with a time server.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ZCL_UTCTIME_INVALID</td><td>Clock not synchronized to a time source. </td></tr>
    <tr><td class="paramname">0-0xFFFFFFFE</td><td>Number of elapsed seconds since midnight UTC on January 1, 2000.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__hal__hcs08.html#ga68237f552f0e9a1d548516af35cacbc9" title="Platform-specific function to return the number of elapsed seconds. ">xbee_seconds_timer</a>, <a class="el" href="group__hal__hcs08.html#ga22b4e3df788254ca5f8530e9aee58515" title="Platform-specific function to return the number of elapsed milliseconds. ">xbee_millisecond_timer</a> </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga2066d4a3853d4b0d8de8b162f829e10f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> end_of_list</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga2066d4a3853d4b0d8de8b162f829e10f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga5a8b2dc9e45a9ee81a94ef304fb62505">uint16_t</a> end_of_list</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga9ebc2ff4a76b13297f08e147d092cf48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> time</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga9ebc2ff4a76b13297f08e147d092cf48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> time</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga1d1b0a116c32c46e7ab4c94e5f789cfa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> time_status</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga1d1b0a116c32c46e7ab4c94e5f789cfa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structzcl__attribute__full__t.html">zcl_attribute_full_t</a> time_status</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga5e971939123710b2c6e2568a28a7f86c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const { ... }   zcl_time_attr</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">        { { ZCL_TIME_ATTR_TIME,</div>
<div class="line">                ZCL_ATTRIB_FLAG_FULL,</div>
<div class="line">                ZCL_TYPE_TIME_UTCTIME,</div>
<div class="line">                &amp;<a class="code" href="group__zcl__time.html#ga4e1da84a7e72ee1626d6328252fd621a">zcl_time_time</a> },</div>
<div class="line">                { 0 }, { 0 },</div>
<div class="line">                &amp;<a class="code" href="group__zcl__time.html#ga2e2d2dbec01a8a45f90a5d01ab3fbd08">_zcl_time_time_get</a>, &amp;<a class="code" href="group__zcl__time.html#ga72946a4ed2ad41dbd35ebb51795b5bb5">_zcl_time_time_set</a> },</div>
<div class="line">        { { ZCL_TIME_ATTR_TIME_STATUS,</div>
<div class="line">                ZCL_ATTRIB_FLAG_FULL,</div>
<div class="line">                ZCL_TYPE_BITMAP_8BIT,</div>
<div class="line">                &amp;<a class="code" href="group__zcl__time.html#ga76f465fead960f138224d8e2a9a59469">zcl_time_timestatus</a> },</div>
<div class="line">                { 0 }, { 0 },</div>
<div class="line">                NULL, &amp;<a class="code" href="group__zcl__time.html#ga1df1514e9a0a17b3e16039ec2026bed1">_zcl_time_timestatus_set</a> },</div>
<div class="line">        ZCL_ATTRIBUTE_END_OF_LIST</div>
<div class="line">}</div>
<div class="ttc" id="group__zcl__time_html_ga2e2d2dbec01a8a45f90a5d01ab3fbd08"><div class="ttname"><a href="group__zcl__time.html#ga2e2d2dbec01a8a45f90a5d01ab3fbd08">_zcl_time_time_get</a></div><div class="ttdeci">uint_fast8_t _zcl_time_time_get(const zcl_attribute_full_t FAR *attribute)</div><div class="ttdef"><b>Definition:</b> zcl_time.c:124</div></div>
<div class="ttc" id="group__zcl__time_html_ga76f465fead960f138224d8e2a9a59469"><div class="ttname"><a href="group__zcl__time.html#ga76f465fead960f138224d8e2a9a59469">zcl_time_timestatus</a></div><div class="ttdeci">uint8_t zcl_time_timestatus</div><div class="ttdoc">Current value of TimeStatus Attribute (#ZCL_TIME_ATTR_TIME_STATUS) </div><div class="ttdef"><b>Definition:</b> zcl_time.c:54</div></div>
<div class="ttc" id="group__zcl__time_html_ga1df1514e9a0a17b3e16039ec2026bed1"><div class="ttname"><a href="group__zcl__time.html#ga1df1514e9a0a17b3e16039ec2026bed1">_zcl_time_timestatus_set</a></div><div class="ttdeci">_zcl_time_debug int _zcl_time_timestatus_set(const zcl_attribute_full_t FAR *attribute, zcl_attribute_write_rec_t *rec)</div><div class="ttdef"><b>Definition:</b> zcl_time.c:163</div></div>
<div class="ttc" id="group__zcl__time_html_ga72946a4ed2ad41dbd35ebb51795b5bb5"><div class="ttname"><a href="group__zcl__time.html#ga72946a4ed2ad41dbd35ebb51795b5bb5">_zcl_time_time_set</a></div><div class="ttdeci">int _zcl_time_time_set(const zcl_attribute_full_t FAR *attribute, zcl_attribute_write_rec_t *rec)</div><div class="ttdef"><b>Definition:</b> zcl_time.c:81</div></div>
<div class="ttc" id="group__zcl__time_html_ga4e1da84a7e72ee1626d6328252fd621a"><div class="ttname"><a href="group__zcl__time.html#ga4e1da84a7e72ee1626d6328252fd621a">zcl_time_time</a></div><div class="ttdeci">zcl_utctime_t zcl_time_time</div><div class="ttdef"><b>Definition:</b> zcl_time.c:50</div></div>
</div><!-- fragment --><p>Global attribute list used in #ZCL_CLUST_ENTRY_TIME_SERVER and for adding a Time Cluster Server to an endpoint. The Time Cluster Client does not have any attributes. </p>

</div>
</div>
<a class="anchor" id="ga926f1bfd80ed5a894abfc872a292c556"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XBEE_BEGIN_DECLS const <a class="el" href="structzcl__attribute__tree__t.html">zcl_attribute_tree_t</a> zcl_time_attribute_tree[]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gabd8e3bd6481f3841825a7596bc131b2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structzcl__attribute__tree__t.html">zcl_attribute_tree_t</a> zcl_time_attribute_tree[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">                { { ZCL_MFG_NONE, &amp;<a class="code" href="group__zcl__time.html#ga5e971939123710b2c6e2568a28a7f86c">zcl_time_attr</a>.time.base, NULL } }</div>
<div class="ttc" id="group__zcl__time_html_ga5e971939123710b2c6e2568a28a7f86c"><div class="ttname"><a href="group__zcl__time.html#ga5e971939123710b2c6e2568a28a7f86c">zcl_time_attr</a></div><div class="ttdeci">const struct @10 zcl_time_attr</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga999cc34fc0c4c1eb840543f1e8237d29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#gafd12020da5a235dfcf0c3c748fb5baed">int32_t</a> zcl_time_skew = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>difference between <a class="el" href="group__hal.html#ga5c1a8bccd41acf1d7264a75698077749" title="Platform-specific function to return the number of elapsed seconds. ">xbee_seconds_timer()</a> and actual calendar time </p>

</div>
</div>
<a class="anchor" id="ga4e1da84a7e72ee1626d6328252fd621a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__zcl__types.html#gadd8ad64f3ae1ee581114f9ca39f3621f">zcl_utctime_t</a> zcl_time_time</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current value of Time Attribute (#ZCL_TIME_ATTR_TIME), start value doesn't matter since it is set by <a class="el" href="group__zcl__time.html#ga2e2d2dbec01a8a45f90a5d01ab3fbd08">_zcl_time_time_get()</a>. </p>

</div>
</div>
<a class="anchor" id="ga76f465fead960f138224d8e2a9a59469"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#gaeabfa2ca48c14f613f88a63b8b0c92e3">uint8_t</a> zcl_time_timestatus = ZCL_TIME_STATUS_MASTER</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current value of TimeStatus Attribute (#ZCL_TIME_ATTR_TIME_STATUS) </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 30 2016 19:41:44 for XBee Firmware Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
